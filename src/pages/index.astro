---
/**
 * Professional Homepage
 * Technical SEO Architect & Laravel Experts
 * Features: Dark theme, semantic HTML5, performance-focused
 */

import { SITE_TITLE, SITE_DESCRIPTION } from '@/consts';
import Main from '@layouts/Main.astro';
import { getLocaleFromPath } from '@utils/i18n-routing';
import { getFeaturedPosts, getRecentPosts } from '@utils/api-helpers';
import { getTranslation, formatDate, formatSeoScore } from '@utils/i18n';

const locale = getLocaleFromPath(Astro.url.pathname);
const isArabic = locale === 'ar';

// Fetch featured posts for homepage
const featuredPosts = await getFeaturedPosts(3);
const recentPosts = await getRecentPosts(5);

// Content based on locale
const content = isArabic ? {
  title: 'Ù…Ù‡Ù†Ø¯Ø³ ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ‚Ù†ÙŠ',
  subtitle: 'Ø®Ø¨Ø±Ø§Ø¡ Laravel ÙˆØ£Ø¯Ø§Ø¡ Ø§Ù„ÙˆÙŠØ¨',
  heroDescription: 'Ù†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ©ØŒ Core Web VitalsØŒ ÙˆØªØ·ÙˆÙŠØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆÙŠØ¨ Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø£Ø¯Ø§Ø¡',
  cta1: 'Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª',
  cta2: 'Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ø³ØªØ´Ø§Ø±Ø©',
  services: 'Ø®Ø¯Ù…Ø§ØªÙ†Ø§',
  service1Title: 'ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ‚Ù†ÙŠ',
  service1Desc: 'ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ ÙˆØªØ­Ø³ÙŠÙ† Ù„Ø£Ø¯Ø§Ø¡ Ù…ÙˆÙ‚Ø¹Ùƒ ÙˆÙ‚Ø§Ø¨Ù„ÙŠØªÙ‡ Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„ÙŠÙ‡',
  service2Title: 'Core Web Vitals',
  service2Desc: 'ØªØ­Ø³ÙŠÙ† Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØµÙ†ÙŠÙØ§Øª Ø£ÙØ¶Ù„',
  service3Title: 'ØªØ·ÙˆÙŠØ± Laravel',
  service3Desc: 'Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆÙŠØ¨ Ù‚ÙˆÙŠØ© ÙˆØ¢Ù…Ù†Ø© Ø¨Ø£Ø¯Ø§Ø¡ Ø¹Ø§Ù„ÙŠØ© Ù…Ø¹ Laravel',
  articles: 'Ø¢Ø®Ø± Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©',
  readMore: 'Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ø²ÙŠØ¯',
  viewAllArticles: 'Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª',
  readingTime: 'Ø¯Ù‚ÙŠÙ‚Ø© Ù‚Ø±Ø§Ø¡Ø©',
} : {
  title: 'Technical SEO Architect',
  subtitle: 'Laravel Experts & Web Performance',
  heroDescription: 'Specializing in Technical SEO, Core Web Vitals optimization, and high-performance web development with Laravel',
  cta1: 'Read Articles',
  cta2: 'Get Consultation',
  services: 'Our Services',
  service1Title: 'Technical SEO Optimization',
  service1Desc: 'Comprehensive analysis and optimization for search visibility and performance',
  service2Title: 'Core Web Vitals',
  service2Desc: 'Optimize LCP, FID, and CLS metrics for better rankings and user experience',
  service3Title: 'Laravel Development',
  service3Desc: 'Build robust, secure web applications with optimal performance and scalability',
  articles: 'Latest Technical Articles',
  readMore: 'Read Article',
  viewAllArticles: 'View All Articles',
  readingTime: 'min read',
};

const title = content.title;
const description = content.heroDescription;

// Professional Service Schema
const professionalServiceSchema = {
  '@context': 'https://schema.org',
  '@type': 'ProfessionalService',
  name: 'DevSEO',
  description: description,
  url: Astro.site?.toString(),
  telephone: '+1-XXX-XXX-XXXX',
  address: {
    '@type': 'PostalAddress',
    addressCountry: isArabic ? 'EG' : 'US',
  },
  areaServed: 'Worldwide',
  serviceType: ['Technical SEO', 'Web Performance', 'Laravel Development'],
  knowsAbout: ['Core Web Vitals', 'Schema Markup', 'Site Architecture', 'Performance Optimization'],
  inLanguage: isArabic ? 'ar-EG' : 'en-US',
  priceRange: '$$',
};

// Organization Schema
const organizationSchema = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: 'DevSEO',
  description: description,
  url: Astro.site?.toString(),
  logo: `${Astro.site}favicon.svg`,
  sameAs: ['https://github.com/AhmedMustafaSarhan'],
  inLanguage: isArabic ? 'ar-EG' : 'en-US',
};
---

<Main
  title={title}
  description={description}
  schema={professionalServiceSchema}
>
  <!-- Hero Section: Dark Gradient with Performance Focus -->
  <header
    class={`relative min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white overflow-hidden ${
      isArabic ? 'text-right' : 'text-left'
    }`}
  >
    <!-- Animated background pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 left-0 w-96 h-96 bg-primary-500 rounded-full mix-blend-screen filter blur-3xl animate-pulse"></div>
      <div class="absolute bottom-0 right-0 w-96 h-96 bg-secondary-500 rounded-full mix-blend-screen filter blur-3xl animate-pulse"></div>
    </div>

    <div class="relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 lg:py-40">
      <div class="max-w-3xl">
        <!-- Main Headline -->
        <h1 class="text-5xl md:text-6xl lg:text-7xl font-black mb-6 leading-tight">
          {content.title}
        </h1>

        <!-- Subtitle -->
        <p class="text-2xl md:text-3xl font-semibold text-primary-300 mb-6">
          {content.subtitle}
        </p>

        <!-- Hero Description -->
        <p class="text-lg md:text-xl text-gray-300 mb-10 leading-relaxed max-w-2xl">
          {content.heroDescription}
        </p>

        <!-- CTA Buttons -->
        <div class={`flex gap-4 flex-wrap mb-12 ${isArabic ? 'flex-row-reverse' : ''}`}>
          <a
            href={isArabic ? '/ar/blog' : '/blog'}
            class="px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:from-primary-600 hover:to-primary-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-primary-500/50 transform hover:-translate-y-1"
          >
            {content.cta1}
          </a>
          <a
            href={isArabic ? '/ar/about' : '/about'}
            class="px-8 py-4 bg-slate-700 text-white font-semibold rounded-lg hover:bg-slate-600 transition-all duration-300 border border-slate-600 hover:border-slate-500"
          >
            {content.cta2}
          </a>
        </div>

        <!-- Trust Indicators -->
        <div class={`flex flex-col sm:flex-row gap-8 text-sm text-gray-400 ${isArabic ? 'flex-row-reverse' : ''}`}>
          <div class="flex items-center gap-2">
            <span class="text-2xl">âš¡</span>
            <span>100/100 Lighthouse Score</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-2xl">ğŸš€</span>
            <span>Sub-1s Load Time</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-2xl">ğŸ“Š</span>
            <span>Data-Driven Results</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
      <svg class="w-6 h-6 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
    </div>
  </header>

  <!-- Services Section: Professional Grid -->
  <section class={`py-24 px-4 sm:px-6 lg:px-8 bg-slate-800 text-white ${isArabic ? 'text-right' : 'text-left'}`}>
    <div class="max-w-6xl mx-auto">
      <!-- Section Header -->
      <div class={`max-w-3xl mb-16 ${isArabic ? 'ml-auto' : ''}`}>
        <h2 class="text-4xl md:text-5xl font-bold mb-6">{content.services}</h2>
        <p class="text-lg text-gray-300">
          {isArabic 
            ? 'Ù†Ù‚Ø¯Ù… Ø­Ù„ÙˆÙ„Ø§Ù‹ Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ù…ÙˆÙ‚Ø¹Ùƒ ÙˆØªØ±ØªÙŠØ¨Ù‡ ÙÙŠ Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«'
            : 'Comprehensive solutions to elevate your digital presence and search rankings'
          }
        </p>
      </div>

      <!-- Services Grid -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Service 1: Technical SEO -->
        <article class="bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl p-8 border border-slate-600 hover:border-primary-500 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/20">
          <div class="mb-6">
            <span class="text-4xl">ğŸ”</span>
          </div>
          <h3 class="text-2xl font-bold mb-4">{content.service1Title}</h3>
          <p class="text-gray-300 mb-6 leading-relaxed">
            {content.service1Desc}
          </p>
          <ul class="space-y-3 text-gray-400">
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…ÙˆÙ‚Ø¹' : 'Comprehensive Site Audit'}
              </span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©' : 'Site Architecture Optimization'}
              </span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'ØªØ±Ù…ÙŠØ² Ø§Ù„Ù…Ø®Ø·Ø·' : 'Schema Markup Implementation'}
              </span>
            </li>
          </ul>
        </article>

        <!-- Service 2: Core Web Vitals -->
        <article class="bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl p-8 border border-slate-600 hover:border-primary-500 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/20">
          <div class="mb-6">
            <span class="text-4xl">âš¡</span>
          </div>
          <h3 class="text-2xl font-bold mb-4">{content.service2Title}</h3>
          <p class="text-gray-300 mb-6 leading-relaxed">
            {content.service2Desc}
          </p>
          <ul class="space-y-3 text-gray-400">
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'ØªØ­Ø³ÙŠÙ† LCP (ØªØ­Ù…ÙŠÙ„ Ø£ÙƒØ¨Ø± Ø¹Ù†ØµØ±)' : 'LCP Optimization'}
              </span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'ØªÙ‚Ù„ÙŠÙ„ CLS (ØªØ­ÙˆÙ„ Ø§Ù„ØªØ®Ø·ÙŠØ·)' : 'CLS Reduction'}
              </span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'ØªØ­Ø³ÙŠÙ† FID (ØªØ£Ø®ÙŠØ± Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„)' : 'FID Optimization'}
              </span>
            </li>
          </ul>
        </article>

        <!-- Service 3: Laravel Development -->
        <article class="bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl p-8 border border-slate-600 hover:border-primary-500 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/20">
          <div class="mb-6">
            <span class="text-4xl">ğŸš€</span>
          </div>
          <h3 class="text-2xl font-bold mb-4">{content.service3Title}</h3>
          <p class="text-gray-300 mb-6 leading-relaxed">
            {content.service3Desc}
          </p>
          <ul class="space-y-3 text-gray-400">
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙˆÙŠØ¨ Ø³Ø±ÙŠØ¹Ø© ÙˆØ¢Ù…Ù†Ø©' : 'Fast & Secure Web Apps'}
              </span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙˆØ³Ø¹' : 'Scalable Architecture'}
              </span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-primary-400 mt-1">âœ“</span>
              <span>
                {isArabic ? 'ÙˆØ§Ø¬Ù‡Ø§Øª Ø¨Ø±Ù…Ø¬ÙŠØ© RESTful' : 'RESTful APIs'}
              </span>
            </li>
          </ul>
        </article>
      </div>
    </div>
  </section>

  <!-- Featured Posts Section -->
  {
    featuredPosts.length > 0 && (
      <section class={`py-24 px-4 sm:px-6 lg:px-8 bg-slate-900 text-white ${isArabic ? 'text-right' : 'text-left'}`}>
        <div class="max-w-6xl mx-auto">
          <h2 class="text-4xl md:text-5xl font-bold mb-12">{content.articles}</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {featuredPosts.map((post) => (
              <article class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-primary-500 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/10 flex flex-col group">
                <!-- Article Image -->
                {post.featured_image_url && (
                  <div class="relative h-48 overflow-hidden bg-slate-700">
                    <img
                      src={post.featured_image_url}
                      alt={getTranslation(post.title, locale)}
                      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                      loading="lazy"
                    />
                    {post.seo_score && (
                      <div class="absolute top-4 right-4 bg-slate-900/80 backdrop-blur px-3 py-1 rounded-full text-sm font-semibold">
                        {post.seo_score >= 80
                          ? 'ğŸŸ¢ ' + post.seo_score
                          : post.seo_score >= 60
                            ? 'ğŸŸ¡ ' + post.seo_score
                            : 'ğŸ”´ ' + post.seo_score}
                      </div>
                    )}
                  </div>
                )}

                <!-- Article Content -->
                <div class="p-6 flex flex-col flex-grow">
                  <h3 class="text-xl font-bold mb-3 group-hover:text-primary-400 transition-colors">
                    {getTranslation(post.title, locale)}
                  </h3>
                  <p class="text-gray-400 mb-4 flex-grow line-clamp-3">
                    {getTranslation(post.description, locale)}
                  </p>

                  <!-- Article Meta -->
                  <div class={`flex items-center gap-4 text-sm text-gray-500 mb-4 ${isArabic ? 'flex-row-reverse' : ''}`}>
                    <time datetime={post.published_at || post.created_at}>
                      {formatDate(post.published_at || post.created_at, locale)}
                    </time>
                    <span>â€¢</span>
                    <span>{post.views || 0} views</span>
                  </div>

                  <!-- Read More Link -->
                  <a
                    href={isArabic ? `/ar/blog/${post.slug}` : `/blog/${post.slug}`}
                    class="inline-flex items-center gap-2 text-primary-400 font-semibold group-hover:gap-3 transition-all"
                  >
                    {content.readMore}
                    <span>â†’</span>
                  </a>
                </div>
              </article>
            ))}
          </div>

          <!-- View All Articles Link -->
          <div class="mt-12 text-center">
            <a
              href={isArabic ? '/ar/blog' : '/blog'}
              class="inline-block px-8 py-3 border-2 border-primary-500 text-primary-400 font-semibold rounded-lg hover:bg-primary-500/10 transition-colors"
            >
              {content.viewAllArticles}
            </a>
          </div>
        </div>
      </section>
    )
  }

  <!-- CTA Section: Dark Premium -->
  <section class={`py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-primary-600 to-secondary-600 text-white relative overflow-hidden ${
    isArabic ? 'text-right' : 'text-left'
  }`}>
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 right-0 w-80 h-80 bg-white rounded-full mix-blend-overlay filter blur-3xl"></div>
    </div>

    <div class="relative z-10 max-w-4xl mx-auto text-center">
      <h2 class="text-4xl md:text-5xl font-bold mb-6">
        {isArabic ? 'Ù‡Ù„ Ø£Ù†Øª Ù…Ø³ØªØ¹Ø¯ Ù„ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ù…ÙˆÙ‚Ø¹ÙƒØŸ' : 'Ready to Transform Your Digital Presence?'}
      </h2>
      <p class="text-lg md:text-xl mb-10 opacity-90">
        {isArabic
          ? 'Ø¯Ø¹Ù†Ø§ Ù†Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ù…Ø© ÙÙŠ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« ÙˆØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'
          : 'Let\'s work together to dominate search results and deliver exceptional user experience'}
      </p>
      <div class={`flex gap-4 justify-center flex-wrap ${isArabic ? 'flex-row-reverse' : ''}`}>
        <a
          href={isArabic ? '/ar/contact' : '/contact'}
          class="px-8 py-4 bg-white text-primary-600 font-semibold rounded-lg hover:bg-gray-100 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1"
        >
          {isArabic ? 'Ø§Ø­Ø¬Ø² Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ©' : 'Book Free Consultation'}
        </a>
        <a
          href={isArabic ? '/ar/blog' : '/blog'}
          class="px-8 py-4 border-2 border-white text-white font-semibold rounded-lg hover:bg-white/10 transition-colors"
        >
          {isArabic ? 'Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ø²ÙŠØ¯' : 'Learn More'}
        </a>
      </div>
    </div>
  </section>
</Main>
