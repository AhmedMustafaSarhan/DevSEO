---
/**
 * Arabic Professional Homepage
 * /ar route
 * Dark-themed, performance-focused design
 */

import { getLocaleFromPath } from '@utils/i18n-routing';
import { getFeaturedPosts, getRecentPosts } from '@utils/api-helpers';
import { getTranslation, formatDate, formatSeoScore } from '@utils/i18n';
import Main from '@layouts/Main.astro';

const locale = getLocaleFromPath(Astro.url.pathname);
const isArabic = locale === 'ar';

const featuredPosts = await getFeaturedPosts(3);
const recentPosts = await getRecentPosts(5);

const title = 'ูููุฏุณ ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ ุงูุชููู';
const description =
  'ูุชุฎุตุต ูู ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ ุงูุชูููุฉ ูCore Web Vitals ูุชุทููุฑ ุงูููุจ ุนุงูู ุงูุฃุฏุงุก';

// Professional Service Schema
const professionalServiceSchema = {
  '@context': 'https://schema.org',
  '@type': 'ProfessionalService',
  name: 'DevSEO',
  description: description,
  url: Astro.site?.toString(),
  areaServed: 'Worldwide',
  serviceType: ['Technical SEO', 'Web Performance', 'Laravel Development'],
  knowsAbout: ['Core Web Vitals', 'Schema Markup', 'Site Architecture', 'Performance Optimization'],
  inLanguage: 'ar-EG',
  priceRange: '$$',
};

const content = {
  title: 'ูููุฏุณ ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ ุงูุชููู',
  subtitle: 'ุฎุจุฑุงุก Laravel ูุฃุฏุงุก ุงูููุจ',
  heroDescription: 'ูุญู ูุชุฎุตุตูู ูู ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ ุงูุชูููุฉุ Core Web Vitalsุ ูุชุทููุฑ ุชุทุจููุงุช ููุจ ุนุงููุฉ ุงูุฃุฏุงุก',
  cta1: 'ุดุงูุฏ ุงูููุงูุงุช',
  cta2: 'ุงุญุตู ุนูู ุงุณุชุดุงุฑุฉ',
  services: 'ุฎุฏูุงุชูุง',
  service1Title: 'ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ ุงูุชููู',
  service1Desc: 'ุชุญููู ุดุงูู ูุชุญุณูู ูุฃุฏุงุก ูููุนู ููุงุจููุชู ููุนุซูุฑ ุนููู',
  service2Title: 'Core Web Vitals',
  service2Desc: 'ุชุญุณูู ูุคุดุฑุงุช ุงูููุจ ุงูุฃุณุงุณูุฉ ููุญุตูู ุนูู ุชุตูููุงุช ุฃูุถู',
  service3Title: 'ุชุทููุฑ Laravel',
  service3Desc: 'ุจูุงุก ุชุทุจููุงุช ููุจ ูููุฉ ูุขููุฉ ุจุฃุฏุงุก ุนุงููุฉ ูุน Laravel',
  articles: 'ุขุฎุฑ ุงูููุงูุงุช ุงูุชูููุฉ',
  readMore: 'ุงูุฑุฃ ุงููุฒูุฏ',
  viewAllArticles: 'ุนุฑุถ ุฌููุน ุงูููุงูุงุช',
  readingTime: 'ุฏูููุฉ ูุฑุงุกุฉ',
};
---

<Main
  title={title}
  description={description}
  schema={professionalServiceSchema}
>
  <!-- Hero Section: Dark Gradient with Performance Focus -->
  <header class="relative min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white overflow-hidden text-right">
    <!-- Animated background pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 left-0 w-96 h-96 bg-primary-500 rounded-full mix-blend-screen filter blur-3xl animate-pulse"></div>
      <div class="absolute bottom-0 right-0 w-96 h-96 bg-secondary-500 rounded-full mix-blend-screen filter blur-3xl animate-pulse"></div>
    </div>

    <div class="relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 lg:py-40">
      <div class="max-w-3xl">
        <!-- Main Headline -->
        <h1 class="text-5xl md:text-6xl lg:text-7xl font-black mb-6 leading-tight">
          {content.title}
        </h1>

        <!-- Subtitle -->
        <p class="text-2xl md:text-3xl font-semibold text-primary-300 mb-6">
          {content.subtitle}
        </p>

        <!-- Hero Description -->
        <p class="text-lg md:text-xl text-gray-300 mb-10 leading-relaxed max-w-2xl">
          {content.heroDescription}
        </p>

        <!-- CTA Buttons -->
        <div class="flex gap-4 flex-wrap mb-12 flex-row-reverse">
          <a
            href="/ar/blog"
            class="px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-lg hover:from-primary-600 hover:to-primary-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-primary-500/50 transform hover:-translate-y-1"
          >
            {content.cta1}
          </a>
          <a
            href="/ar/about"
            class="px-8 py-4 bg-slate-700 text-white font-semibold rounded-lg hover:bg-slate-600 transition-all duration-300 border border-slate-600 hover:border-slate-500"
          >
            {content.cta2}
          </a>
        </div>

        <!-- Trust Indicators -->
        <div class="flex flex-col sm:flex-row gap-8 text-sm text-gray-400 flex-row-reverse">
          <div class="flex items-center gap-2 flex-row-reverse">
            <span class="text-2xl">โก</span>
            <span>ุฏุฑุฌุฉ Lighthouse 100/100</span>
          </div>
          <div class="flex items-center gap-2 flex-row-reverse">
            <span class="text-2xl">๐</span>
            <span>ุณุฑุนุฉ ุชุญููู ุฃูู ูู ุซุงููุฉ</span>
          </div>
          <div class="flex items-center gap-2 flex-row-reverse">
            <span class="text-2xl">๐</span>
            <span>ูุชุงุฆุฌ ูุงุฆูุฉ ุนูู ุงูุจูุงูุงุช</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
      <svg class="w-6 h-6 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
    </div>
  </header>

  <!-- Services Section: Professional Grid -->
  <section class="py-24 px-4 sm:px-6 lg:px-8 bg-slate-800 text-white text-right">
    <div class="max-w-6xl mx-auto">
      <!-- Section Header -->
      <div class="max-w-3xl mb-16 ml-auto">
        <h2 class="text-4xl md:text-5xl font-bold mb-6">{content.services}</h2>
        <p class="text-lg text-gray-300">
          ููุฏู ุญูููุงู ูุชูุงููุฉ ูุชุญุณูู ุฃุฏุงุก ูููุนู ูุชุฑุชูุจู ูู ูุญุฑูุงุช ุงูุจุญุซ
        </p>
      </div>

      <!-- Services Grid -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Service 1: Technical SEO -->
        <article class="bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl p-8 border border-slate-600 hover:border-primary-500 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/20">
          <div class="mb-6 text-right">
            <span class="text-4xl">๐</span>
          </div>
          <h3 class="text-2xl font-bold mb-4">{content.service1Title}</h3>
          <p class="text-gray-300 mb-6 leading-relaxed">
            {content.service1Desc}
          </p>
          <ul class="space-y-3 text-gray-400 text-right">
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ุชุญููู ุดุงูู ูููููุน</span>
            </li>
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ุชุญุณูู ุงูุจููุฉ ุงูุชุญุชูุฉ</span>
            </li>
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ุชุฑููุฒ ุงููุฎุทุท</span>
            </li>
          </ul>
        </article>

        <!-- Service 2: Core Web Vitals -->
        <article class="bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl p-8 border border-slate-600 hover:border-primary-500 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/20">
          <div class="mb-6 text-right">
            <span class="text-4xl">โก</span>
          </div>
          <h3 class="text-2xl font-bold mb-4">{content.service2Title}</h3>
          <p class="text-gray-300 mb-6 leading-relaxed">
            {content.service2Desc}
          </p>
          <ul class="space-y-3 text-gray-400 text-right">
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ุชุญุณูู LCP (ุชุญููู ุฃูุจุฑ ุนูุตุฑ)</span>
            </li>
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ุชูููู CLS (ุชุญูู ุงูุชุฎุทูุท)</span>
            </li>
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ุชุญุณูู FID (ุชุฃุฎูุฑ ุงูุฅุฏุฎุงู)</span>
            </li>
          </ul>
        </article>

        <!-- Service 3: Laravel Development -->
        <article class="bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl p-8 border border-slate-600 hover:border-primary-500 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/20">
          <div class="mb-6 text-right">
            <span class="text-4xl">๐</span>
          </div>
          <h3 class="text-2xl font-bold mb-4">{content.service3Title}</h3>
          <p class="text-gray-300 mb-6 leading-relaxed">
            {content.service3Desc}
          </p>
          <ul class="space-y-3 text-gray-400 text-right">
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ุชุทุจููุงุช ููุจ ุณุฑูุนุฉ ูุขููุฉ</span>
            </li>
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ูุนูุงุฑูุฉ ูุงุจูุฉ ููุชูุณุน</span>
            </li>
            <li class="flex items-start gap-2 flex-row-reverse">
              <span class="text-primary-400 mt-1">โ</span>
              <span>ูุงุฌูุงุช ุจุฑูุฌูุฉ RESTful</span>
            </li>
          </ul>
        </article>
      </div>
    </div>
  </section>

  <!-- Featured Posts Section -->
  {
    featuredPosts.length > 0 && (
      <section class="py-24 px-4 sm:px-6 lg:px-8 bg-slate-900 text-white text-right">
        <div class="max-w-6xl mx-auto">
          <h2 class="text-4xl md:text-5xl font-bold mb-12">{content.articles}</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {featuredPosts.map((post) => (
              <article class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-primary-500 transition-all duration-300 hover:shadow-lg hover:shadow-primary-500/10 flex flex-col group">
                <!-- Article Image -->
                {post.featured_image_url && (
                  <div class="relative h-48 overflow-hidden bg-slate-700">
                    <img
                      src={post.featured_image_url}
                      alt={getTranslation(post.title, locale)}
                      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                      loading="lazy"
                    />
                    {post.seo_score && (
                      <div class="absolute top-4 left-4 bg-slate-900/80 backdrop-blur px-3 py-1 rounded-full text-sm font-semibold">
                        {post.seo_score >= 80
                          ? '๐ข ' + post.seo_score
                          : post.seo_score >= 60
                            ? '๐ก ' + post.seo_score
                            : '๐ด ' + post.seo_score}
                      </div>
                    )}
                  </div>
                )}

                <!-- Article Content -->
                <div class="p-6 flex flex-col flex-grow text-right">
                  <h3 class="text-xl font-bold mb-3 group-hover:text-primary-400 transition-colors">
                    {getTranslation(post.title, locale)}
                  </h3>
                  <p class="text-gray-400 mb-4 flex-grow line-clamp-3">
                    {getTranslation(post.description, locale)}
                  </p>

                  <!-- Article Meta -->
                  <div class="flex items-center gap-4 text-sm text-gray-500 mb-4 flex-row-reverse">
                    <time datetime={post.published_at || post.created_at}>
                      {formatDate(post.published_at || post.created_at, locale)}
                    </time>
                    <span>โข</span>
                    <span>{post.views || 0} ูุดุงูุฏุฉ</span>
                  </div>

                  <!-- Read More Link -->
                  <a
                    href={`/ar/blog/${post.slug}`}
                    class="inline-flex items-center gap-2 text-primary-400 font-semibold group-hover:gap-3 transition-all flex-row-reverse"
                  >
                    <span>โ</span>
                    {content.readMore}
                  </a>
                </div>
              </article>
            ))}
          </div>

          <!-- View All Articles Link -->
          <div class="mt-12 text-center">
            <a
              href="/ar/blog"
              class="inline-block px-8 py-3 border-2 border-primary-500 text-primary-400 font-semibold rounded-lg hover:bg-primary-500/10 transition-colors"
            >
              {content.viewAllArticles}
            </a>
          </div>
        </div>
      </section>
    )
  }

  <!-- CTA Section: Dark Premium -->
  <section class="py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-primary-600 to-secondary-600 text-white relative overflow-hidden text-right">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute top-0 left-0 w-80 h-80 bg-white rounded-full mix-blend-overlay filter blur-3xl"></div>
    </div>

    <div class="relative z-10 max-w-4xl mx-auto text-center">
      <h2 class="text-4xl md:text-5xl font-bold mb-6">
        ูู ุฃูุช ูุณุชุนุฏ ูุชุญุณูู ุฃุฏุงุก ูููุนูุ
      </h2>
      <p class="text-lg md:text-xl mb-10 opacity-90">
        ุฏุนูุง ูุณุงุนุฏู ูู ุงููุตูู ุฅูู ุงูููุฉ ูู ูุชุงุฆุฌ ุงูุจุญุซ ูุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
      </p>
      <div class="flex gap-4 justify-center flex-wrap flex-row-reverse">
        <a
          href="/ar/contact"
          class="px-8 py-4 bg-white text-primary-600 font-semibold rounded-lg hover:bg-gray-100 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1"
        >
          ุงุญุฌุฒ ุงุณุชุดุงุฑุฉ ูุฌุงููุฉ
        </a>
        <a
          href="/ar/blog"
          class="px-8 py-4 border-2 border-white text-white font-semibold rounded-lg hover:bg-white/10 transition-colors"
        >
          ุงูุฑุฃ ุงููุฒูุฏ
        </a>
      </div>
    </div>
  </section>
</Main>
